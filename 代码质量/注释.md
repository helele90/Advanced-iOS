# 注释

### 目的
- 更容易理解代码的意图
- 代码本身提供的信息不足时，通过`注释`的方式提供更多信息。

> 一般来讲，带有注释的代码，理解起来会快速。

### 原则
- 注释应该提供更多信息
- 注释应该尽量简洁

## `常见添加注释的场景`

#### `公开类型和方法API`
###### 功能介绍
- 对功能的简单总结
###### 内部实现逻辑/功能
- 有时候需要外部知道内部的一些实现细节。例如排序逻辑，是否有缓存等。
###### 性能/警告
- 例如方法的时间复杂度，非线程安全等。

> 说明：这里提供注释最主要的价值是，提供给使用方有效的信息，更方便和规范去使用。

#### `纪录想法`
纪录下编写代码时的一些想法，可以方便之后阅读，更容易理解。
###### 读者会疑惑场景
比如一些不合乎常理的实现，需要说明`为什么`要这么做。
场景：
- 为了修复某些bug添加的特殊处理
- 奇怪的定时器

> 说明：不添加注释，通过会导致之后不知道这里的意图，不敢修改。

###### 对代码的想法
记录对于目前代码的一些想法
场景：
- 比如目前某些地方比较混乱或性能不佳
- 添加`TODO`注释，描述之后的一些优化方向

> 提示：最主要的是，你可以提供一些有价值的信息给之后需要读代码的人，减少他们的疑惑。就算是给自己写的也是有意义的，因为时间长了之后不一定会记得。

#### `代码块注释`
总结一段代码的功能和意图。
场景：
- 代码本身并不能清晰解释你的意图。
- 对一段代码块的功能总结，比如方法中的某些`for`循环
- 某些逻辑比较复杂，添加一定的说明
> 提示：某些场景，当一块代码块需要添加注释时，应该考虑是否应该抽出到一个独立的方法中。

## `常见问题`

#### `注释包含无用的信息或不够简洁`
注释应该尽可能简短和清晰。如果某些内容并不能给阅读者提供更多的信息，是没有价值的。
> 比如添加一些无关的信息或不够简洁。

#### `用注释来掩盖糟糕的代码`
- 逻辑混乱/可读性差的代码
- 不好的命名
> 提示：不过如果你不打算优化这块代码，添加一定的注释也好比什么都没有强。

#### `不写注释`
代码本身提供的信息不足(比如命名不规范，逻辑复杂等)。需要添加注释不写注释

#### `注释不及时更新`
- 当方法功能/参数/返回值改变时，不及时修改注释。

#### `不规范的注释`
- 导致`IDE`无法正确查看注释的信息。

#### `非公开API需不需要添加注释`
对于是否编写注释，应该站在`读者`的视角来考虑(有可能是未来的你)。如果能给读者带来更多有价值的信息，或能解决读者的疑惑，就是有意义的。

## 如何写好注释
- 参考系统库和优秀开源库的注释
- 站在`代码阅读者`的角度来看